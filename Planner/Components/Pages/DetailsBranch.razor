@page "/details/{name}"

@if(string.IsNullOrEmpty(Branch.Name))
{
    <Welcome/>
    return;
}
  <MudSwipeArea OnSwipeEnd="HandleSwipeEnd">
    <MudTabs Elevation="4" Rounded="true" Centered="true" Color="@Color.Transparent" @ref="Tabs">
        <MudTabPanel Text="План/Факт месяца" Icon="@Icons.Material.Filled.AddChart" ID="@("pn_one")">
            <MudStack Class="full-screen">
                @if (Branch.Services.Count > 0)
                {
                    @foreach (var service in Branch.Services)
                    {
                        <MudPaper Class="pa-1 m-1" Outlined="true">
                            <ServiceComponent Service="@service" />
                            <MudToolBar Class="justify-end">
                                <MudIconButton Icon="@Icons.Material.Outlined.Edit" OnClick="(async()=> await EditServiceAsync(service))" Color="Color.Success" Variant="Variant.Filled" Size="Size.Small" Class="m-1" />
                                <MudIconButton Icon="@Icons.Material.Outlined.Delete" OnClick="(async()=> await DeleteServiceAsync(service))" Color="Color.Error" Variant="Variant.Filled" Size="Size.Small" Class="m-1" />
                            </MudToolBar>
                        </MudPaper>
                    }
                }
                else
                {
                    <MudStack Class="content-center">
                        <MudIcon Color="Color.Error" Icon="@Icons.Material.Filled.QuestionMark" Style="height:150px; width:150px"></MudIcon>
                        <MudText>Не данных</MudText>
                        <MudButton OnClick="(async()=> await CreateServiceAsync())" Variant="Variant.Text">Добавьте услугу</MudButton>
                    </MudStack>
                }
            </MudStack>


         <MudToolBar Class="justify-end">
            <MudIconButton Icon="@Icons.Material.Outlined.Add" OnClick="(async()=> await CreateServiceAsync())" />
            <MudIconButton Icon="@Icons.Material.Outlined.Edit" OnClick="(async()=> await EditBranchAsync())" Color="Color.Success" />
            <MudIconButton Icon="@Icons.Material.Outlined.Delete" OnClick="(async()=> await DeleteBranchAsync())" Color="Color.Error" />
        </MudToolBar>
    </MudTabPanel>

        <MudTabPanel Text="План недели" Icon="@Icons.Material.Filled.TrendingUp" ID="@("pn_two")">
            <MudStack Class="full-screen">
            
        </MudStack>
    </MudTabPanel>
</MudTabs>

</MudSwipeArea>

